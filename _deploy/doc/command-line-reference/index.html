<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Command line reference</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://melt.cs.umn.edu/command-line-reference/">
    
    <script src="/js/nav.js"></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Silver Documentation</a>

  </div>

</header>


    <div class="site-nav">
      

<ul class="nav">

    
    <li>
    
        <a href="doc/">Home</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/install-guide/">Installation guide</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/command-line-reference/">Command line reference</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/faq/">Frequently asked questions (FAQ)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/error-faq/">Frequently found errors (FFE)</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Tutorials (TODO)
    
    
        

<ul class="nav">

    
    <li>
    
        Intro to AGs - dc?
    
    
    </li>

    
    <li>
    
        Simple
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Concepts
    
    
        

<ul class="nav">

    
    <li>
    
        Attribute grammars
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/decorated-vs-undecorated/">Decorated vs undecorated</a>
    
    
    </li>

    
    <li>
    
        Forwarding
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/aspects/">Aspects</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/collections/">Collection attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/modules/">The module system</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/types/">Types</a>
    
    
    </li>

    
    <li>
    
        Concrete syntax
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/io/">IO</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/lr-parsing/">LR parsing</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/ffi/">Foreign Function Interface</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/modular-well-definedness/">Modular well-definedness</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Language reference
    
    
        

<ul class="nav">

    
    <li class="collapsible collapsed">
    
        Declarations
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/nonterminals/">Nonterminals</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        <a href="doc/ref/decl/productions/">Productions</a>
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/productions/concrete/">Concrete</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/productions/aspect/">Aspect</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/productions/default/">Default</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/attributes/">Attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/occurs/">Occurs</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/functions/">Functions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/globals/">Global values</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/types/">Type declarations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/parsers/">Parser declarations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/terminals/">Terminals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/annotations/">Annotations</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Copper-specific
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/copper/parser-attribute/">Parser attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/copper/lexer-class/">Lexer classes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/copper/disambiguate/">Disambiguation functions</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Production body
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/stmt/equations/">Equations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/forwarding/">Forwards to</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/locals/">Locals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/return/">Return</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Copper-specific
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/stmt/copper/pluck/">Pluck</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/copper/print/">Print</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Expressions
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/expr/calls/">Function/production application</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/attribute-access/">Attribute access</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/booleans/">Boolean expressions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/comparisons/">Comparison operators</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/numeric/">Numeric expressions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/decorate/">Decorate with</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/new/">New (undecorate)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/terminal/">Terminal literals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/pattern-matching/">Pattern matching</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/let/">Lets</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Extensions
    
    
        

<ul class="nav">

    
    <li>
    
        List syntax
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/ext/easy-terminal/">Easy terminals</a>
    
    
    </li>

    
    <li>
    
        Convenience
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Library reference
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/lib/string/">String</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/pair/">Pair</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/list/">List</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/maybe/">Maybe</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/io/">IO</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/document-pp/">Document (pp)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/other/">Other</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/comparison/">Comparison fns</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li>
    
        <a href="doc/bibliography/">Bibliography</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/style-guide/">Style guide</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Development
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/dev/building/">Building Silver</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/code-organization/">Code organization</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/runtime-editing/">Runtime development</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/long-term-todo/">Silver popularity todo list</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Eclipse
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/dev/eclipse/getting-started/">Getting started</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/eclipse/ide-decl/">Creating an IDE plugin</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/eclipse/internals/">Eclipse internals docs</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

</ul>

    </div>

    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Command line reference</h1>
  </header>

  <article class="post-content">
    <h1 id="running-silver">Running Silver</h1>

<p>If you have followed the <a href="doc/install-guide/">installation guide</a>, you have a <code>silver</code> script in your <code>~/bin</code> which is typically invoked as follows:</p>

<pre><code>silver grammar:to:build
</code></pre>

<p>If you do not want to use the <code>silver</code> script, or are on a platform other than linux, you will likely want to write a build script that looks something like the following:</p>

<pre><code>java -Xss4M -Xmx1800M -jar $SILVER_HOME/jars/RunSilver.jar  grammar:to:build
</code></pre>

<p>In both cases <em>grammar:to:build</em> is the name of the grammar to compile. By default, the Silver compiler will look for the directory <code>./grammar/to/build</code> from where you run the silver script.</p>

<p>The optional command-line flags are described below.</p>

<h2 id="command-line-arguments">Command line arguments</h2>

<p>The common optional flags used with Silver are:</p>

<ul>
  <li><code>-o</code> <em>jar-name</em>
    <ul>
      <li>Changes the name of the generated jar file to the specified name. (Include the <code>.jar</code>)</li>
    </ul>
  </li>
  <li><code>--clean</code>
    <ul>
      <li>Ignores generated files from previous runs, and rebuilds everything.</li>
    </ul>
  </li>
  <li><code>-I</code> <em>paths</em>
    <ul>
      <li>Instructs Silver to look for grammars in the specified directories before looking in those specified in <code>GRAMMAR_PATH</code>. (Or the defaults, of the current directory and the <code>grammars</code> directory where Silver is installed.)</li>
    </ul>
  </li>
</ul>

<p>Less common:</p>

<ul>
  <li><code>--copperdump</code>
    <ul>
      <li>By default, a dump file containing information about the parser is generated only when LALR conflicts are detected, to aid in debugging the grammar.  This flag will force a dump to occur even without errors.  This may be useful in debugging parse errors that you think shouldn’t be happening: copper reports the parser state, and with the assistance of this information, may reveal what is going wrong.</li>
    </ul>
  </li>
  <li><code>--warn-all</code>
    <ul>
      <li>Perform some extra analysis. At the time of writing, this includes a modularity analysis that will help find, for example, missing equations.</li>
    </ul>
  </li>
  <li><code>-G</code> <em>path</em>
    <ul>
      <li>Specifies where to store Silver-generated temporary files.  This overrides the value found in <code>SILVER_GEN</code>. (And the default is in the <code>generated</code> directory where Silver is installed.)</li>
    </ul>
  </li>
</ul>

<p><strong>Note:</strong> If you encounter a strange build error, try again with the <code>--clean</code> flag. There are a few relatively rare build bugs that can still cause generated files to become stale.</p>

<h2 id="environment-variables">Environment variables</h2>

<p>Most uses of Silver should not require any adjustments to environment variables but<br />
they are documented here nonetheless.</p>

<ul>
  <li><code>GRAMMAR_PATH</code>
    <ul>
      <li>A colon separated list of paths to search for grammars.  By default, this is set to include the current directory and the <code>grammars</code> directory in the Silver distribution. Generally, if you need Silver to look in other directories using the <code>-I</code> switch is preferable.</li>
    </ul>
  </li>
  <li><code>SILVER_HOME</code>
    <ul>
      <li>The location of the Silver jar files. If the <code>silver</code> script is used, this flag is set there.  If running Silver by calling the <code>RunSilver.jar</code> file directly this may not need to be set as the jar file will set it automatically.</li>
    </ul>
  </li>
  <li><code>SILVER_GEN</code>
    <ul>
      <li>The directory to generated temporary files within. This is set by default to the <code>generated</code> directory in the Silver distribution. An alternative to modifying this variable is to simply symlink this directory to the directory you wish to store temporary files in.</li>
    </ul>
  </li>
</ul>

<p>For the <code>silver</code> script, there is also</p>

<ul>
  <li><code>SVJVM_FLAGS</code>
    <ul>
      <li>Used to adjust flags sent to the jvm. For example, <code>SVJVM_FLAGS="-Xss8M -Xmx4000M -verbose:gc" silver grammar:to:build</code> (bash syntax) will give the jvm more memory and print some information every time a garbage collection happens.</li>
    </ul>
  </li>
</ul>

<h2 id="the-main-function">The <code>main</code> function</h2>

<p>If the grammar specified on the command line to build also contains a <code>main</code> function, then the resulting jar file will be executable.  <code>main</code> functions should have the following basic form:</p>

<pre><code>function main
IOVal&lt;Integer&gt; ::= args::[String] ioin::IO
{
  return ioval(ioin, 0);
}
</code></pre>

<p>For an explanation of how IO works in Silver, see <a href="doc/lib/io/">IO Functions</a>.  The integer value wrapped inside <code>IOVal</code> is the exit status of the program (0 is success.)  And of course, the command line arguments are provided as a list of strings.</p>

<p>Simple examples of main functions can be found in every tutorial distributed with Silver.</p>

<h1 id="nailgunning-silver">Nailgunning Silver</h1>

<p>Under <code>support/nailgun</code> there are two scripts for running <code>nailgun</code> on Silver jars. These require <code>nailgun</code> of course and the scripts specifically require <code>bash</code>. (On lab machines the scripts will find a nailgun build under our project space automatically. On Ubuntu machines, you can <code>apt-get install nailgun</code> and it’ll work.)</p>

<p>Nailgun runs everything in one jvm, saving repeated warm-up time. For largish test suites, this is possibly huge: our ableC test suite went from 45 minutes to 2.</p>

<p>To use these scripts, run <code>./install-sv-nailgun</code> in <code>support/nailgun</code>. This requires <code>~/bin</code> and bash.</p>

<p>To use nailgun, first initialize your bash shell with <strong><code>. sv-nailgun</code></strong>. Note that’s “dot space” not “./”. This ‘sources’ the script into your bash shell, setting some environment variables and adding some functions. If it fails, there should be some sort of error message.</p>

<p>Next you initialize the jar you want to run repeatedly with <strong><code>sv-serve &lt;jarfile&gt;</code></strong>. Unless an error appears, this should work.</p>

<p>After that, you can call that jar repeatedly with <strong><code>sv-call &lt;args...&gt;</code></strong>. Each of these will re-use the JVM.</p>

<p>When done, call <strong><code>sv-serve-stop</code></strong> to stop that JVM.</p>

<p>Enjoy the speedups.</p>

<p><strong>Mac OS X Bug</strong>: you probably need Homebrew. The default <code>sed</code> command on OSX is broken somehow and this will cause errors when you run <code>sv-call</code> complaining that it can’t find exactly the right class that it should be able to find. The trouble is that there’s a unprintable trailing carriage return that should be stripped out, but apparently isn’t. Install GNU sed instead and everything should be okay.</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

  </div>

</footer>

<script>nav_hook();</script>


  </body>

</html>
