<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Getting started</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://melt.cs.umn.edu/dev/eclipse/getting-started/">
    
    <script src="/js/nav.js"></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Silver Documentation</a>

  </div>

</header>


    <div class="site-nav">
      

<ul class="nav">

    
    <li>
    
        <a href="doc/">Home</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/install-guide/">Installation guide</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/command-line-reference/">Command line reference</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/faq/">Frequently asked questions (FAQ)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/error-faq/">Frequently found errors (FFE)</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Tutorials (TODO)
    
    
        

<ul class="nav">

    
    <li>
    
        Intro to AGs - dc?
    
    
    </li>

    
    <li>
    
        Simple
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Concepts
    
    
        

<ul class="nav">

    
    <li>
    
        Attribute grammars
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/decorated-vs-undecorated/">Decorated vs undecorated</a>
    
    
    </li>

    
    <li>
    
        Forwarding
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/aspects/">Aspects</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/collections/">Collection attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/modules/">The module system</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/types/">Types</a>
    
    
    </li>

    
    <li>
    
        Concrete syntax
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/io/">IO</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/lr-parsing/">LR parsing</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/ffi/">Foreign Function Interface</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/concepts/modular-well-definedness/">Modular well-definedness</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Language reference
    
    
        

<ul class="nav">

    
    <li class="collapsible collapsed">
    
        Declarations
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/nonterminals/">Nonterminals</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        <a href="doc/ref/decl/productions/">Productions</a>
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/productions/concrete/">Concrete</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/productions/aspect/">Aspect</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/productions/default/">Default</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/attributes/">Attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/occurs/">Occurs</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/functions/">Functions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/globals/">Global values</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/types/">Type declarations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/parsers/">Parser declarations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/terminals/">Terminals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/annotations/">Annotations</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Copper-specific
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/decl/copper/parser-attribute/">Parser attributes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/copper/lexer-class/">Lexer classes</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/decl/copper/disambiguate/">Disambiguation functions</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Production body
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/stmt/equations/">Equations</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/forwarding/">Forwards to</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/locals/">Locals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/return/">Return</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Copper-specific
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/stmt/copper/pluck/">Pluck</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/stmt/copper/print/">Print</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Expressions
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/ref/expr/calls/">Function/production application</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/attribute-access/">Attribute access</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/booleans/">Boolean expressions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/comparisons/">Comparison operators</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/numeric/">Numeric expressions</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/decorate/">Decorate with</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/new/">New (undecorate)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/terminal/">Terminal literals</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/pattern-matching/">Pattern matching</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/expr/let/">Lets</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Extensions
    
    
        

<ul class="nav">

    
    <li>
    
        List syntax
    
    
    </li>

    
    <li>
    
        <a href="doc/ref/ext/easy-terminal/">Easy terminals</a>
    
    
    </li>

    
    <li>
    
        Convenience
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

    
    <li class="collapsible collapsed">
    
        Library reference
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/lib/string/">String</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/pair/">Pair</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/list/">List</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/maybe/">Maybe</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/io/">IO</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/document-pp/">Document (pp)</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/other/">Other</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/lib/comparison/">Comparison fns</a>
    
    
    </li>

</ul>

    
    </li>

    
    <li>
    
        <a href="doc/bibliography/">Bibliography</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/style-guide/">Style guide</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Development
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/dev/building/">Building Silver</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/code-organization/">Code organization</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/runtime-editing/">Runtime development</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/long-term-todo/">Silver popularity todo list</a>
    
    
    </li>

    
    <li class="collapsible collapsed">
    
        Eclipse
    
    
        

<ul class="nav">

    
    <li>
    
        <a href="doc/dev/eclipse/getting-started/">Getting started</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/eclipse/ide-decl/">Creating an IDE plugin</a>
    
    
    </li>

    
    <li>
    
        <a href="doc/dev/eclipse/internals/">Eclipse internals docs</a>
    
    
    </li>

</ul>

    
    </li>

</ul>

    
    </li>

</ul>

    </div>

    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Getting started</h1>
  </header>

  <article class="post-content">
    <h2 id="prerequisites">Prerequisites</h2>

<p>Above and beyond the standard Silver requirements, you need Eclipse 3.3+ and Maven 3.0+.</p>

<h2 id="configuring-eclipse">Configuring Eclipse</h2>

<p>Silver code is usually a bit memory hungry, and stack hungry too. Open <code>eclipse.ini</code> where eclipse is unpacked, and edit it <code>-Xmx384M</code> (or whatever <code>-Xmx</code> line appears in yours) to <code>-Xmx2000M</code> and also add as another line <code>-Xss8M</code>.</p>

<h2 id="building-the-silver-plugin-for-eclipse-from-scratch">Building the Silver plugin for Eclipse from scratch</h2>

<p>In other words, this will color and build Silver projects from within Eclipse.</p>

<p>Starting point: everything should be in order enough to run, for example <code>./deep-rebuild</code>. Things should presumably be up to date, e.g. you’ve run <code>./update</code>.</p>

<p>Next, run <code>./make-ide</code>. This will do the following:</p>

<ol>
  <li>Runs <code>./self-compile</code> once. From scratch this is unnecessary, but this step helps with doing development on the Silver plugin for Eclipse, by first rebuilding the Silver compiler, so that any changes in how it generates plugins are reflected in the resulting build.</li>
  <li>Runs <code>build.sh</code> in <code>runtime/imp</code>. This:<br />
    1. Runs <code>silver</code> on <code>core</code> and <code>ide</code> and generates these java files inside the silver-eclipse runtime.<br />
    1. Builds that jar with maven.<br />
    1. Strips out <code>core</code> and <code>ide</code> class files from that jar. These should ultimately be provided by the real generated silver jar.</li>
  <li>Runs <code>./self-compile-ide</code> which just builds <code>silver:composed:idetest</code></li>
  <li>Runs <code>mvn package</code> in <code>generated/ide/silver.composed.idetest</code>.</li>
  <li>Reminds you of what path to use, when we later install this plugin to eclipse.</li>
</ol>

<p>Next, start eclipse and go to install software (in mine its Help-&gt;Install New Software…) and paste in the path it told you to use.</p>

<p>The plugin should show up. Install it, blah blah, restart eclipse, and now should should be able to File-&gt;New-&gt;Project… (Silver-&gt;Silver project).</p>

<p>The easiest way to make things work is to then symlink the files you’re working on into a new project. That is, inside the newly created silver project in your workspace:</p>

<pre><code>$ ln -s ~/repos/silver/tutorials/simple/src/simple simple
</code></pre>

<p>Then right click your project in Eclipse and refresh. (Or hit f5 with your project selected.)</p>

<p>Note: there is (at the time of writing) no way to adjust the grammar path. It’s the project root. So you can’t, e.g., symlink a <code>src</code> or <code>grammars</code> directory in. Yet. Maybe YOU can fix this!! :D</p>

<p>Then you need to tell it which grammar to build. You can do this by either editing the properties file, or right clicking on your project, going to Properties, Silver page, and giving it the grammar name to build there.</p>

<p>(We should probably introduce a new build mode for Silver that just builds ALL grammars it can find under a root directory. This would remove this step for using eclipse.)</p>

<h2 id="doing-development-on-the-silver-eclipse-runtime-or-plugin">Doing development on the Silver-Eclipse runtime or plugin</h2>

<p>I use this script:</p>

<pre><code>#!/bin/bash

SILVER_SITE=/home/tedinski/repos/silver/generated/ide/silver.composed.idetest/updatesite/target/repository
SILVER_FEATURE_NAME=silver.composed.idetest.feature

set -e

rm -rf eclipse workspaces
mkdir workspaces
cp -r eclipse-template eclipse

SILVER_FEATURE_VERSIONDOTJAR=$(ls $SILVER_SITE/features | cut -d_ -f2)
SILVER_FEATURE_VERSION=${SILVER_FEATURE_VERSIONDOTJAR/.jar/}

eclipse/eclipse -application org.eclipse.update.core.standaloneUpdate -command install -from "file:$SILVER_SITE" -featureId $SILVER_FEATURE_NAME -version $SILVER_FEATURE_VERSION
eclipse/eclipse
</code></pre>

<p>I:</p>

<ol>
  <li>Extract a fresh eclipse install. This creates a folder called <code>eclipse</code>.</li>
  <li>Start it, set the workspace to a <code>workspaces</code> directory right next to <code>eclipse</code> wherever we are, and set it to ALWAYS use this workspace.</li>
  <li>Close eclipse. <code>mv eclipse eclipse-template</code></li>
</ol>

<p>Then use this script. It nukes the workspace and any old eclipse install. Creates a new eclipse install by copying back <code>eclipse-template</code>, then it installs the plugin pointed to by <code>SILVER_SITE</code> and <code>SILVER_FEATURE_NAME</code>, then it starts the IDE.</p>

<p>You still have to new project, symlink and whatnot to actually test things out, but it automates some of the annoying steps.</p>

<p>This script also eliminates any worries about version numbers of the plugin, since it starts fresh each time. (I call the script <code>start-fresh</code>.)</p>

<h2 id="using-the-silver-pluging-to-develop-silver">Using the Silver pluging to develop Silver</h2>

<p>This is not YET practical due to slow performance.</p>

<p>First, builds use a ton of memory, and this does not seem to be adequately released between builds. Partly this might be a lack of garbage collection (some explicit calls might help), but there may be some possibility of a memory leak as well. Needs investigating. But this part seems managable if you’re willing to devote 2G of ram to eclipse, but that’s assuming there is no memory leak, so continued use is managable.</p>

<p>Mostly, the problem is that the ‘build’ step passes no information to the ‘postbuild’ step. So every save basically causes two builds to occur. One to mark errors in the IDE, one to generate java files.</p>

<p>There may be other performance bugs as well. In general, the silver compiler itself isn’t very memory efficient. We could fix that and it would help both normal compiles and the eclipse plugin.</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

  </div>

</footer>

<script>nav_hook();</script>


  </body>

</html>
